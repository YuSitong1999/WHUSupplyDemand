<!--index.wxml-->
<view class="container">

  <!--
  <!-- 发布消息 
  <view class="message">
    <navigator url="../sendMessage/sendMessage" open-type="navigate" class="message-text">
      <text>发布消息</text>
    </navigator>
  </view>

  <!-- 查看自己已发布消息 
  <view class="message">
    <navigator url="../myMessage/myMessage" open-type="navigate"  class="message-text">
      <text>查看自己已发布消息</text>
    </navigator>
  </view>

  -->

  <!-- TODO 分类 -->
  <view>
  分类待完成
  </view>
  
  
  <!-- 供需按钮 -->
  <view class="button">
    <button style="background-color: red;" bindtap="getSupply">供</button>
    <button style="background-color: blue;" bindtap="getDemand">需</button>
    
  </view>
  

  <!-- 全部消息列表 -->
  <scroll-view class="messagebox" wx:if="{{kind==-1}}"  scroll-y='true'>
  点击“供”或“需”显示消息
  </scroll-view>
  <scroll-view class="messagebox" wx:elif="{{kind==0}}"  scroll-y='true'> <!-- 供给 -->
    <!-- <view wx:if="{{queryResult}}"> -->
      <view wx:for="{{queryResult}}" wx:for-index="idx" wx:for-item="item" class="code">
        <view wx:if="{{item.kind==false}}" class="message">{{item.message}}</view>
      </view>
    <!-- </view> -->
  </scroll-view>
  <scroll-view class="messagebox" wx:else  scroll-y='true'>  <!-- 需求 -->
    <!-- <view wx:if="{{queryResult}}"> -->
      <view wx:for="{{queryResult}}" wx:for-index="idx" wx:for-item="item" class="code">
        <view wx:if="{{item.kind==true}}" class="message">{{item.message}}</view>
      </view>
    <!-- </view> -->
  </scroll-view>


</view>

  <!-- 下边栏 -->
  <view class="sidebar">

    <button>首页</button>

    <button bindtap="goToSendMessage">发布消息</button>
    
    <!--
    <view class="message-text">
    <navigator url="../sendMessage/sendMessage" open-type="navigate">
        <text>发布消息</text>
    </navigator>
    </view>
    -->

    <!-- 用户 openid -->
    <button 
      open-type="getUserInfo" 
      bindgetuserinfo="onGetUserInfo"
      class="userinfo-avatar"
      style="background-image: url({{avatarUrl}})"
      bindtap="goToMyMessage"
    ></button>
  </view>